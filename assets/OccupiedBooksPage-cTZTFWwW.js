import{d as N,i as O,r as c,c as V,o,f as u,g as m,b as v,h as B,t as $,u as p,n as a,e as i,F as g,l as C,k as _,a as b,_ as P}from"./index-BCUyAAPs.js";import{u as R}from"./books-DQuMulHW.js";import{B as j,C as w}from"./BaseHeader-DK_6ZRXn.js";import{B as F,a as A}from"./BookDetail-Bahql8rF.js";import"./PotIcon-Dxm1-QIH.js";const z={class:"container"},E={class:"container"},H=N({__name:"OccupiedBooksPage",setup(I){const r=O(),f=R(),y=c(""),k=c(!1),d=c(null),n=c(null),D=V(()=>r.isAdmin?[]:f.occupiedBooks.filter(s=>{var e,t,l;return((e=s.reader)==null?void 0:e.id)&&((t=s.reader)==null?void 0:t.id)===((l=r.target)==null?void 0:l.id)}));function M(){if(n.value)try{f.returnBook(n.value)}catch(s){S(s.message)}finally{n.value=null}}function S(s){y.value=s,k.value=!0}return(s,e)=>(o(),u("div",{class:a(s.$style.OccupiedBooksPage)},[m(j,null,{title:v(()=>[B($(p(r).isAdmin?"Выданные книги":"Мои книги"),1)]),_:1}),p(r).isAdmin?(o(),u("main",{key:0,class:a(s.$style.main)},[i("div",z,[i("h1",{class:a(s.$style.title)},"Выданные книги",2),i("div",{class:a(s.$style.list)},[(o(!0),u(g,null,C(p(f).occupiedBooks,t=>(o(),b(A,{key:t.id,book:t,"delete-label":"Вернуть",onDetails:e[0]||(e[0]=l=>d.value=l),onDelete:e[1]||(e[1]=l=>n.value=l)},null,8,["book"]))),128))],2)])],2)):_("",!0),p(r).isReader?(o(),u("main",{key:1,class:a(s.$style.main)},[i("div",E,[i("h1",{class:a(s.$style.title)},"Мои книги",2),i("div",{class:a(s.$style.list)},[(o(!0),u(g,null,C(D.value,t=>(o(),b(A,{key:t.id,book:t,"can-book":!1,"can-delete":!1,onDetails:e[2]||(e[2]=l=>d.value=l)},null,8,["book"]))),128))],2)])],2)):_("",!0),m(F,{book:d.value,onClose:e[3]||(e[3]=t=>d.value=null)},null,8,["book"]),m(w,{"is-open":n.value!==null,onAccept:M,onReject:e[4]||(e[4]=t=>n.value=null)},{default:v(()=>e[6]||(e[6]=[B(" Вы уверены, что хотите вернуть книгу в библиотеку? ")])),_:1},8,["is-open"]),m(w,{"is-open":k.value,"reject-label":null,"accept-label":"Ок",onAccept:e[5]||(e[5]=t=>k.value=!1)},{default:v(()=>[B($(y.value),1)]),_:1},8,["is-open"])],2))}}),L="_main_1uwl6_348",T="_title_1uwl6_352",U="_list_1uwl6_377",q={main:L,title:T,list:U},G={$style:q},Y=P(H,[["__cssModules",G]]);export{Y as default};
